<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/status.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/status.py" />
              <option name="originalContent" value="from json import JSONDecodeError&#10;import os&#10;&#10;# Try to load .env file if it exists (for local development)&#10;try:&#10;    from dotenv import load_dotenv&#10;    load_dotenv()&#10;except ImportError:&#10;    # dotenv not installed, will use environment variables directly&#10;    pass&#10;&#10;import requests&#10;import csv&#10;from datetime import datetime&#10;import pytz&#10;&#10;username = &quot;akash_codespace&quot;&#10;&#10;url = f&quot;https://www.fiverr.com/users/{username}/is_online&quot;&#10;headers = {&#10;    &quot;Referer&quot;: f&quot;https://www.fiverr.com/{username}&quot;,&#10;    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36&quot;&#10;}&#10;&#10;# Proxy configuration from environment variables&#10;proxy_username = os.getenv(&quot;PROXY_USERNAME&quot;)&#10;proxy_password = os.getenv(&quot;PROXY_PASSWORD&quot;)&#10;proxy_host = os.getenv(&quot;PROXY_HOST&quot;)&#10;proxy_port = os.getenv(&quot;PROXY_PORT&quot;)&#10;&#10;proxies = None&#10;if all([proxy_username, proxy_password, proxy_host, proxy_port]):&#10;    proxy_url = f&quot;http://{proxy_username}:{proxy_password}@{proxy_host}:{proxy_port}&quot;&#10;    proxies = {&#10;        &quot;http&quot;: proxy_url,&#10;        &quot;https&quot;: proxy_url&#10;    }&#10;&#10;# Retry logic: try up to 5 times&#10;MAX_RETRIES = 5&#10;status = &quot;ERROR&quot;&#10;&#10;for attempt in range(1, MAX_RETRIES + 1):&#10;    try:&#10;        r = requests.get(url, headers=headers, proxies=proxies, timeout=10)&#10;        status = r.json()[&quot;is_online&quot;]&#10;        status = &quot;ONLINE&quot; if status else &quot;OFFLINE&quot;&#10;        break  # Success, exit the retry loop&#10;    except (JSONDecodeError, KeyError, requests.RequestException) as e:&#10;        pass  # Continue to next attempt&#10;&#10;# Get current time in Bangladesh timezone (Asia/Dhaka)&#10;bd_timezone = pytz.timezone('Asia/Dhaka')&#10;bd_time = datetime.now(bd_timezone)&#10;&#10;# Define CSV file path&#10;csv_file = &quot;status.csv&quot;&#10;&#10;# Read existing entries from CSV&#10;existing_entries = []&#10;if os.path.exists(csv_file):&#10;    try:&#10;        with open(csv_file, &quot;r&quot;, newline=&quot;&quot;) as f:&#10;            reader = csv.reader(f)&#10;            existing_entries = list(reader)&#10;    except Exception as e:&#10;        print(f&quot;Warning: Could not read existing CSV file: {e}&quot;)&#10;        existing_entries = []&#10;&#10;# Keep only the last 95 entries (so with the new one, we'll have 96 total)&#10;MAX_ENTRIES = 96&#10;if len(existing_entries) &gt;= MAX_ENTRIES:&#10;    existing_entries = existing_entries[-(MAX_ENTRIES - 1):]&#10;&#10;# Write back the existing entries plus the new one&#10;try:&#10;    with open(csv_file, &quot;w&quot;, newline=&quot;&quot;) as f:&#10;        w = csv.writer(f)&#10;        # Write existing entries&#10;        for entry in existing_entries:&#10;            w.writerow(entry)&#10;        # Write new entry&#10;        w.writerow([bd_time.isoformat(), status])&#10;    print(f&quot;Status logged: {status} at {bd_time.isoformat()}&quot;)&#10;except Exception as e:&#10;    print(f&quot;Error: Could not write to CSV file: {e}&quot;)&#10;" />
              <option name="updatedContent" value="from json import JSONDecodeError&#10;import os&#10;&#10;# Try to load .env file if it exists (for local development)&#10;try:&#10;    from dotenv import load_dotenv&#10;    load_dotenv()&#10;except ImportError:&#10;    # dotenv not installed, will use environment variables directly&#10;    pass&#10;&#10;import requests&#10;import csv&#10;from datetime import datetime&#10;import pytz&#10;&#10;username = &quot;akash_codespace&quot;&#10;&#10;url = f&quot;https://www.fiverr.com/users/{username}/is_online&quot;&#10;headers = {&#10;    &quot;Referer&quot;: f&quot;https://www.fiverr.com/{username}&quot;,&#10;    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36&quot;&#10;}&#10;&#10;# Proxy configuration from environment variables&#10;proxy_username = os.getenv(&quot;PROXY_USERNAME&quot;)&#10;proxy_password = os.getenv(&quot;PROXY_PASSWORD&quot;)&#10;proxy_host = os.getenv(&quot;PROXY_HOST&quot;)&#10;proxy_port = os.getenv(&quot;PROXY_PORT&quot;)&#10;&#10;proxies = None&#10;if all([proxy_username, proxy_password, proxy_host, proxy_port]):&#10;    proxy_url = f&quot;http://{proxy_username}:{proxy_password}@{proxy_host}:{proxy_port}&quot;&#10;    proxies = {&#10;        &quot;http&quot;: proxy_url,&#10;        &quot;https&quot;: proxy_url&#10;    }&#10;&#10;# Retry logic: try up to 5 times&#10;MAX_RETRIES = 5&#10;status = &quot;ERROR&quot;&#10;&#10;for attempt in range(1, MAX_RETRIES + 1):&#10;    try:&#10;        r = requests.get(url, headers=headers, proxies=proxies, timeout=10)&#10;        status = r.json()[&quot;is_online&quot;]&#10;        status = &quot;ONLINE&quot; if status else &quot;OFFLINE&quot;&#10;        break  # Success, exit the retry loop&#10;    except (JSONDecodeError, KeyError, requests.RequestException) as e:&#10;        pass  # Continue to next attempt&#10;&#10;# Get current time in Bangladesh timezone (Asia/Dhaka)&#10;bd_timezone = pytz.timezone('Asia/Dhaka')&#10;bd_time = datetime.now(bd_timezone)&#10;&#10;# Define CSV file path&#10;csv_file = &quot;status.csv&quot;&#10;&#10;# Read existing entries from CSV&#10;existing_entries = []&#10;if os.path.exists(csv_file):&#10;    try:&#10;        with open(csv_file, &quot;r&quot;, newline=&quot;&quot;) as f:&#10;            reader = csv.reader(f)&#10;            existing_entries = list(reader)&#10;    except Exception as e:&#10;        print(f&quot;Warning: Could not read existing CSV file: {e}&quot;)&#10;        existing_entries = []&#10;&#10;# Keep only the last 95 entries (so with the new one, we'll have 96 total)&#10;MAX_ENTRIES = 96&#10;if len(existing_entries) &gt;= MAX_ENTRIES:&#10;    existing_entries = existing_entries[-(MAX_ENTRIES - 1):]&#10;&#10;# Write back the existing entries plus the new one&#10;try:&#10;    with open(csv_file, &quot;w&quot;, newline=&quot;&quot;) as f:&#10;        w = csv.writer(f)&#10;        # Write existing entries&#10;        for entry in existing_entries:&#10;            w.writerow(entry)&#10;        # Write new entry&#10;        w.writerow([bd_time.isoformat(), status])&#10;    print(f&quot;Status logged: {status} at {bd_time.isoformat()}&quot;)&#10;except Exception as e:&#10;    print(f&quot;Error: Could not write to CSV file: {e}&quot;)" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>